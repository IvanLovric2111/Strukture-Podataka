#include<stdio.h>
#include<stdlib.h>

#define MAXLINE 1024
#define MAXSIZE 128
#define MAXBOD 50

    typedef struct student 
    {   
		char ime[MAXSIZE];
		char prezime[MAXSIZE];
		double bodovi;
    };

	void ispis(student* students, int brojstudenata);

	int main()
	{
		student* studenti = NULL;
		FILE* datoteka = NULL;
		char buffer[MAXLINE] = { 0 };
		int brojac = 0;
		int n = 0;

		datoteka = fopen("studenti.txt", "r");

		if (!datoteka)
		{
			printf("Greška!");
		}

		while (!feof(datoteka))
		{
			fgets(buffer, MAXLINE, datoteka);
			n++;
		}

		studenti = (student*)malloc(n * sizeof(student));

		if (!studenti)
		{
			printf("Greška alociranja!");
			free(studenti);
		}
		
		while (!feof(datoteka))
		{
			fscanf(datoteka, " %s %s %lf", studenti[brojac].ime, studenti[brojac].prezime, &studenti[brojac].bodovi);
			brojac++;
		}

		ispis(studenti, n);

		fclose(datoteka);

		return 0;
	}

	void ispis(student* students, int brojstudenata)
	{
		double* relativnibodovi = NULL;
		int i = 0;

		relativnibodovi = (double*)malloc(brojstudenata * sizeof(double));

		if (!relativnibodovi)
		{
			printf("Greška alociranja!");
			free(relativnibodovi);
		}

		for (i = 0; i < brojstudenata; i++)
		{
			relativnibodovi[i] = students[i].bodovi / MAXBOD * 100;
		}

		for (i = 0; i < brojstudenata; i++)
		{
			printf("%s %s %lf %lf", students[i].ime, students[i].prezime, students[i].bodovi, relativnibodovi[i]);
		}
	}
